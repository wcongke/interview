## 服务端与网络 面试题

### 1.`http`与`tcp`的不同
`http`的责任是去定义数据，在两台计算机之间相互传递数据时，`http`规定了每段数据以什么形势表达才能被另一台计算机理解

`tcp`是规定数据应该在计算机之间怎样才能稳定高效传输

### 2.`tcp`与`udp`的区别
1. `tcp`是一个面向连接的、可靠的、基于字节流的传输层协议
2. `udp`是一个面向无连接的传输层协议

`tcp`为什么可靠，是因为它有三次握手来保证双方都有接收和发送数据的能力。
字节流动服务：将大块数据分割为以报文为单位的数据包进行管理

### 3.TCP/IP的三次握手和四次挥手
#### 3.1三次握手
- 第一次握手: 建立连接。客户端发送连接请求，发送SYN报文，将seq设置为0。然后，客户端进入SYN_SEND状态，等待服务器的确认。
- 第二次握手: 服务器收到客户端的SYN报文段。需要对这个SYN报文段进行确认，发送ACK报文，将ack设置为1。同时，自己还要发送SYN请求信息，将seq为0。服务器端将上述所有信息一并发送给客户端，此时服务器进入SYN_RECV状态。
- 第三次握手: 客户端收到服务器的ACK和SYN报文后，进行确认，然后将ack设置为1，seq设置为1，向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手。

#### 3.2四次挥手
- 第一次挥手：客户端向服务器发送一个FIN报文段，将设置seq为160和ack为112，;此时，客户端进入 FIN_WAIT_1状态,这表示客户端没有数据要发送服务器了，请求关闭连接。
- 第二次挥手：服务器收到了客户端发送的FIN报文段，向客户端回一个ACK报文段，ack设置为1，seq设置为112;服务器进入了CLOSE_WAIT状态，客户端收到服务器返回的ACK报文后，进入FIN_WAIT_2状态。
- 第三次挥手：服务器会观察自己是否还有数据没有发送给客户端，如果有，先把数据发送给客户端，再发送FIN报文；如果没有，那么服务器直接发送FIN报文给客户端。请求关闭连接，同时服务器进入LAST_ACK状态。
- 第四次挥手：客户端收到服务器发送的FIN报文段，向服务器发送ACK报文段，将seq设置为161，将ack设置为113，然后客户端进入TIME_WAIT状态;服务器收到客户端的ACK报文段以后，就关闭连接;此时，客户端等待2MSL后依然没有收到回复，则证明Server端已正常关闭，客户端也可以关闭连接了。

[TCP/IP](https://juejin.im/post/5b189ca0f265da6e1e1adcbf)
[TCP TCP／IP HTTP HTTPS](https://juejin.im/post/59e9ce696fb9a04500022e06)

### 4.get和post的区别
- 大小
  - get传输一般2k-8k，ie限制2k
  - post没有限制
- 安全
  - get通过url明文传输
  - post通过body传输
  - 都不安全，因为http就是明文传输
- 浏览器记录
  - get请求浏览器会记录，post不会
- 浏览器后腿
  - get无害，post会再次提交
- 浏览器收藏
  - get可以收藏，post不可以
- 浏览器缓存
  - get可以缓存，post不可以
- 编码方式
  - get通过url编码
  - post支持多种编码
- tcp数据包
  - get产生一个数据包
  - post产生两个
- 使用方式
  - get主要获取数据
  - post主要原来保存数据

### 5.常见的前端优化方案
优化策略：减少请求次数、减少资源大小、提高响应和加载速度、优化资源加载时机、优化加载方式
- 合并、压缩、混淆`html/js/css`文件（webpack实现，减少资源大小）
- nginx开启Gzip，进一步压缩资源（减少资源大小）
- 图片资源使用cdn加速（提高加载速度）
- 符合条件的图标做base64处理（减少资源大小）
- 样式表放首部，js放尾部（js单线程，会阻塞页面；资源加载方式）
- 设置缓存（强缓存和协商缓存，提高加载速度）
- link或者src增加rel属性，设置prefetch或preload可预加载资源（加载机制）
- 如果使用了ui组件，采用按需加载（减小资源大小）
- spa项目，通过import或者require做路由按需加载（减少资源大小）
- 服务端渲染ssr，加快首屏渲染，利用seo
- 页面使用骨架屏，提高首页加载速度
- 使用jpeg2000、jpeg xr、webp的图片格式来替代现有的jpeg和png
- 使用图片懒加载 `lazyload`
